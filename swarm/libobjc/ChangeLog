1999-05-30  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.am (objc.dll): Update per new genctors.
	
	* genctors: Redirect into $1.c.  Use $1 as the function name.

1999-05-29  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.am (libobjc.dll): Use $(DLLWRAP), not dllwrap.
	(lib_LTLIBRARIES): Set to @LIBOBJC_LA@.
	(EXTRA_LTLIBRARIES): Set to libobjc.la.
	(bin_PROGRAMS): Set to @OBJC_DLL@.
	(EXTRA_PROGRAMS): Set to objc.dll.
	(install-data-local): New rule for libobjc.a (if USEDLL is set).
	(noinst_LTLIBRARIES): Add libobjc_.la and related variables.
	(libobjc_la_LDFLAGS): Add -rpath $(libdir) so that libtool
	will treat libobjc.la as an installed library.

	* configure.in: Set LIBOBJC_LA or OBJC_DLL depending on if USEDLL
	is set (from md_CHECK_DLL). Substitute LIBOBJC_LA and OBJC_DLL.
	(AC_OUTPUT): Extract objc/externvar.h.

	* Makefile.am (CPPFLAGS): Quote $(EXPORT_EXTERN).  It can't
	be quoted in acdll.m4 because it is extracted into externvar.h.

1999-05-28  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* misc.c (_objc_malloc, _objc_atomic_malloc, _objc_valloc,
	_objc_realloc, _objc_callc, _objc_free): Add externobjcvardef.

	* class.c: (_objc_lookup_class): Add externobjcvardef.

	* init.c (_objc_load_callback): Add externobjcvardef.

	* configure.in: Use md_CHECK_DLL.

	* Makefile.am (CPPFLAGS): Add -Dexternobjcvar=$(EXPORT_EXTERN).

1999-05-26  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.am (libobjc.dll): New rule.
	(EXTRA_DIST): New files dllinit.c and genctors.

1999-05-22  Marcus Daniels  <mgd@pajarito.libarts.wsu.edu>

	* ltconfig: Add support for hpux9; generate and compile function
	to call all constructors.

1999-05-20  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* mframe.m: Include sys/sigevent.h if __hpux__ and
	HAVE_SYS_SIGEVENT_H.

	* configure.in: Check for sys/sigevent.h.

1999-05-16  Marcus G. Daniels  <swamsfi@lark.cc.ukans.edu>

	* archive.c, objects.c, selector.c: Include string.h.

1999-05-15  Marcus G. Daniels  <swamsfi@lark.cc.ukans.edu>

	* config/alpha/mframe-generic.h (MFRAME_STACK_STRUCT): Add.
	Add casts from pointer diff to ints for printf args.

1999-05-15  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.am (libobjc_la_LIBADD): Add -lgcc.
	(libobjc_la_LDFLAGS): Add -L to libgcc location.  This is to
	resolve symbols like __eprintf on HPUX, where shared library
	linking doesn't go through gcc.

	* config/hppa/{mframe-hpux,compiler-info-hpux}.h: Renamed from
	*hpux10.h.

1999-05-11  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* config/sparc/mframe-solaris2.h (MFRAME_ARG_ENCODING): Return
	to using GET_SPARC_ARG_LOCATION; don't rely on compiler metadata for
	coding signature. Don't do alignment of offsets
	except in the case of stack.

1999-05-10  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* mframe.m (mframe_next_arg): Handle negative offsets (as stack
	offsets).

	* config/hppa/mframe-hpux10.h (MFRAME_ARG_ENCODING): Rewrite.
	Allow negative offsets.  Use existing offsets, stripping register
	designation for floats and doubles.  Handle weird relocation of
	registers not designated for stack, but that underflow the top
	of the region between arg_ptr and argFrame.

	* config/hppa/{mframe,compiler-info}-hpux10.h replace *generic.h.

1999-05-09  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* config/sparc/mframe-solaris2.h (MFRAME_ARG_ENCODING): Disable
	check for sizes less and alignment of original.  Disable use
	of GET_SPARC_ARG_LOCATION, trusting the `+' and offset encoding.

	* config/mips/mframe-irix6.h: Add stack offset counter to mips_args.
	(MFRAME_INIT_ARGS): Initialize it to 96 (determined empirically).
	(MFRAME_ARG_ENCODING): Handle stack items. 

1999-05-08  Marcus Daniel  <marcusd@asl.krasnow.gmu.edu>

	* config/mips/mframe-irix6.h (MFRAME_INIT_ARGS, MFRAME_ARG_ENCODING): 
	Add separate counters for floating point and non-floating point
	registers.

1999-05-08  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* config/mips/mframe-irix6.h (refstructp): New inline.
	(mframe_get_struct_addr_ptr, MFRAME_ARG_ENCODING): Use it.
	(MFRAME_INIT_ARGS): Start CUM at 20.
	(MFRAME_ARG_ENCODING): Use offset of 4 when large struct reference,
	and CUM otherwise.  In latter case, add size to CUM.
	Retain register tags.

1999-05-07  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* config/mips/mframe-irix6.h (MFRAME_{G,S}ET_STRUCT_ADDR): 
	Use an offset of 1 into the argframe for struct return address.
	Note that this only occurs for structures larger than 16 bytes,
	(mframe_get_struct_addr_ptr): New static inline.
	(MFRAME_GET_STRUCT_ADDR, MFRAME_SET_STRUCT_ADDR): Use it.

	* config/mips/compiler-info-irix6.h, config/mips/mframe-irix6.h:
	Renamed from *irix6.5.h.

1999-05-06  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* config/unknown/compiler-info-generic.h,
	config/i386/compiler-info-linux-gnu.h,
	config/sparc/compiler-info-solaris2.h,
	config/hppa/compiler-info-generic.h:  Remove INVISIBLE_STRUCT_RETURN,
	it is redundant with mframe's MFRAME_STACK_STRUCT.

	* config/mips/compiler-info-irix6.5.h,
	config/mips/mframe-irix6.5.h: New files.

	* sendmsg.c: Use MFRAME_STACK_STRUCT from mframe.h instead of
	INVISIBLE_STRUCT_RETURN from compiler-info.h.

1999-04-28  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* mframe.m: Declare alloca.

	* Object.m: Include string.h.

	* config/unknown/mframe-generic.h (MFRAME_ARG_ENCODING): Cast
	pointer difference to int to avoid warning (Irix 6.5).

	* mframe.m: Include sys/sigevent.h in case of HPUX.
	This is to avoid warning about implicit structure definition.

1999-04-27  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* config/unknown/mframe-generic.h (MFRAME_ARG_ENCODING): Cast argument
	to int to avoid warning.

1999-04-26  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* mframe.m: Don't include mframe-preface.h.

1999-04-19  Marcus G. Daniels  <mgd@helen.santafe.edu>

	* mframe.m: Include string.h for strncpy.

1999-03-19  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.am (SUBDIRS): Add m4.

	* Reorganized as standalone automake package with mframe support.

Wed Jan 27 02:31:01 1999  Jeffrey A Law  (law@cygnus.com)

	* Makefile.in (ALL_CFLAGS): Add -DIN_GCC.

Tue Jan  5 01:38:53 1999  Jeffrey A Law  (law@cygnus.com)

	* configure.in (thread_file): Correct and simplify code to find
	the thread file.
	* configure: Rebuilt.

1998-11-26  Manfred Hollstein  <manfred@s-direktnet.de>

	* configure.in (compiler_name): Add check to detect if this
	language's compiler has been built.
	* configure: Regenerate.

Mon Nov 23 16:50:28 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	*  configure.in: Use AC_PREREQ(2.12.1).

Thu Nov 19 20:33:37 1998  Jeffrey A Law  (law@cygnus.com)

	* Makefile.in (runtime-info.h): Avoid GNU make extensions.

Sun Nov  8 17:46:14 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* Makefile.in (INCLUDES): Add -I$(srcdir)/$(MULTISRCTOP)../include.

Thu Oct 22 14:34:06 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* configure.in: Use AC_CONFIG_AUX_DIR($topsrcdir).

Sat Oct 17 05:21:31 1998  Ovidiu Predescu  <ovidiu@slip.net>

	* objc-features.texi (Top): Changed the email address.
	* objc-features.texi (Garbage Collection): Use @uref instead of @url.

Mon Oct 11 21:25:27 1998  Ovidiu Predescu  <ovidiu@slip.net>

	* encoding.c: Redefine get_inner_array_type to get the first entry
 	in the structure.

Thu Oct  8 12:21:14 1998  Richard Frith-Macdonald <richard@brainstorm.co.uk>

	* encoding.c (objc_skip_type_qualifiers): Handle _C_BYREF.
	(objc_get_type_qualifiers): Similarly.
	* objc/encoding.h (_C_BYREF): Define.
	(_F_BYREF): Define.

1998-10-07  David S. Miller  <davem@pierdol.cobaltmicro.com>

	* objc/sarray.h: Make boffset be an unsigned long when sparc so it
	works out on 64-bit systems.

Tue Oct  6 20:32:06 1998  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* Makefile.in (INCLUDES): Make it multilib-friendly

Fri Oct  2 07:12:14 1998  H.J. Lu  (hjl@gnu.org)

	* Makefile.in (INCLUDES): Add -I$(srcdir)/../gcc.

Thu Oct  1 22:33:03 1998 Robert Lipe  <robertl@dgii.com>
			 Jeffrey A Law  (law@cygnus.com)

	* Makefile.in (INCLUDES): Reference gcc via $MULTIBUILDTOP.
	(FLAGS_TO_PASS): Added.
	(runtime-info.h): Reference cc1ibj via $MULTIBUILDTOP.

	* archive.c: Change config.h to tconfig.h.

	* configure.in: Find gcc's object directory even for multilibs.

Wed Sep 30 18:17:17 1998  Robert Lipe  <robertl@dgii.com>

	* configure.in: Escape ^ in grep string.
	* configure: Rebuilt.

Wed Sep 30 09:14:52 1998  Jeffrey A Law  (law@cygnus.com)

	* All .h files pushed down into the objc/ subdirectory.
	* Makefile.in (copy_headers): Corresponding changes.
	* configure.in (AC_INIT): Corresponding changes.
	* configure: Rebuilt.

1998-09-30  Ben Elliston  <bje@cygnus.com>
	    Jeff Law	  <law@cygnus.com>

	* Makefile.in: Rewrite.

	* configure.in: Likewise.

	* configure: Regenerate.

	* All .c files.  Remove "objc" prefix when including objc header
	files.  Include tconfig.h, not ../tconfig.h.

Mon Sep 21 23:27:10 1998  Ovidiu Predescu <ovidiu@slip.net>

	* encoding.c (TREE_TYPE, ARRAY_TYPE): Define.
	(get_inner_array_type): Define.

1998-09-21  Ben Elliston  <bje@cygnus.com>

	* New directory.  Moved files from ../gcc/objc.

