1999-03-18  Vladimir Jojic  <vjojic@chama.santafe.edu>

	* directory.m (create_class_refs): Modify find to return primitive
	type class instead of the java.lang wrapper.
	
1999-03-18  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* directory.m (create_class_refs): Initialize globalZone via
	static field lookup in SwarmEnvironment class.

	* SwarmEnvironment.m: Include swarmconfig.h (for VERSION).
	(Java_swarm_SwarmEnvironment_initSwarm): 
	Renamed from Java_SwarmEnvironment_initSwarm.
	Fix off-by-one argv/argc problem. 
	Initialize argv[0] to "javaswarm".  Use initSwarmApp instead
	of initSwarm.

	* directory.m (create_class_refs): c_int is an Integer, not an Int.

	* Makefile.in: Split stubs and support code into two shared libraries.

1999-03-17  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* SwarmEnvironment.m: Include defobj.h instead of defobj/FCall.h.
	(Java_SwarmEnvironment_initSwarm): 
	Use renamed init_javacall_tables; defobj_init_java_call_tables.

1999-03-16  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in (libjavaswarm_la_OBJECTS): Add SwarmEnvironment.lo.

1999-03-16  Vladimir Jojic  <vjojic@chama.santafe.edu>

	* SwarmEnvironment.m (Java_SwarmEnvironment_initSwarm): Add 
	calls to java_directory_init and init_javacall_tables.

1999-03-16  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* directory.h (JUPDATE): New macro.
	(JADD): Remove.

	* directory.[hm] (java_directory_init): Add jniEnv argument.
	(java_directory_update, java_directory_update_java): New functions.

	* setup.c: Remove initialize constructor.

1999-03-15  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in: Include $(top_builddir)/etc/Makefile.common.
	Append build-directory -I directives to CPPFLAGS.
	Append @CFLAGS_NOWARN_UNKNOWN_PRAGMAS@ to CFLAGS and OBJCFLAGS.
	(libjavaswarm_la_LDFLAGS): Use SUPPORTLDFLAGS.
	(libjavaswarm.la): Use SWARMLIBS.

1999-03-14  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in (CPPFLAGS): Add -I for libobjc.
	(abs_top_builddir): New variable.
	(IMPMODULES): New variable.
	(libjavaswarm_la_LDFLAGS): Use it to get .libs directories for -L.
	Pass -L for libobjc/.libs.  Pass -rpath $(libdir).
	(libjavaswarm.la): Expand list of -l for IMPMODULES.

1999-03-11  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* directory.h (JFINDOBJCMETHOD): New macro.

1999-03-11  Vladimir Jojic  <vjojic@chama.santafe.edu>

	* SwarmEnvironment.m: New file.

	* SwarmEnvironment.h: New file. 

1999-03-11  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* directory.c 
	(c_char, c_byte, c_int, c_short, c_long, c_float, c_double, c_object):
	New statics.
	(ensure_classes): Set them if initFlag is NO.

	* directory.[ch] (java_ensure_selector): New function.

	* setup.c (initialize, shutdown): Remove JNI stuff.

1999-03-09  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in (CPPFLAGS): Add -I$(top_srcdir)/src/misc, and
	$(top_builddir), -I$(top_builddir), and foreach expansion of
	srcdir and builddir of modules.  Don't substitute or use $(includedir).

1999-03-08  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* directory.h (JFINDOBJC): Formerly JFIND.
	(JFINDJAVA): New macro.

	* directory.c (compare_java_objects): Formerly compare_objects.
	(compare_objc_objects): New function.
	(java_tree): Formerly directory_tree.
	(objc_tree): New static variable.
	(java_directory_init): Initialize objc_tree.
	(java_directory_drop): Drop objc_tree.

	* directory.[hc] (java_directory_java_find): Formerly
	java_directory_find.
	(java_directory_objc_find): New function.

	* Makefile.in (libjavaswarm_la_OBJECTS): Add setup.lo.
	(CPPFLAGS): Add -I$(srcdir).

	* setup.c: New file. 
	
	* Makefile.in (CFLAGS, CC): Substitute.  
	(directory.c): Formerly directory.m.
	(%.lo): Add rule from %.c.

	* directory.[hm] (java_directory_init): Formerly initDirectoryTree.
	(java_directory_drop): Formerly removeDirectoryTree.
	(java_directory_find): Formerly _directory_findEntry.
	(java_directory_add): Formerly _directory_addNewEntry.

	* directory.m: Include objc/objc.h.
	(compare_objects): Formerly _directory_compare_jobjects.  Make static.

	* directory.h (java_directory_find, java_directory_add): Declare.
	(JFIND): Formerly DIRECTORY_ID_LOOKUP.
	(JADD): Formerly DIRECTORY_ADD_NEW_ENTRY.

	* directory.m: Rename javaobject -> java_object and objcobject to
	objc_object throughout.

	* Makefile.in (srcdir): Substitute.
	(VPATH): Set to $(srcdir).
	(libjavaswarm_la_OBJECTS): Add directory.lo.

	* directory.m: Include misc.h instead of stdlib.h.
	(_directory_addNewEntry): Use xmalloc instead of malloc.
	(compare_jobjects): 

	* directory.h: Don't declare extern _directory_tree.

1999-03-06  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in (OBJCFLAGS): Add @CFLAGS_NOWARN_UNKNOWN_PRAGMAS@.
	(jdkdir): Renamed from javaprefix.

1999-03-05  Vladimir Jojic  <vjojic@chama.santafe.edu>

	* Makefile.in (javaprefix): Assign jdkdir to javaprefix.

	* directory.h: Add new file.

	* directory.m: Add new file.

1999-03-02  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in (includedir): Substitute.
	(CPPFLAGS): Add -I$(includedir).

1999-03-01  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in (libjavaswarm.la): Missing object list.
	(OBJC, OBJCFLAGS): Substitute; switch to Objective C stubs. 
	Disable warnings about unknown pragmas.
	(INSTALL): Substitute.
	(install): New target.

1999-02-28  Marcus G. Daniels  <mgd@pojoaque.santafe.edu>

	* Makefile.in: Start.


