include ../Makefile.common
CC=@CC@
RANLIB=@RANLIB@
top_builddir=../..
SHELL=@SHELL@
LIBTOOL=@LIBTOOL@

prefix=@prefix@
exec_prefix=@exec_prefix@
libdir=@libdir@
LIBS=@LIBS@

javaprefix=/opt/SUNWjava/usr/java1.2
javaincludedir=$(javaprefix)/include
JAVAINCLUDES=-I$(javaincludedir) -I$(javaincludedir)/solaris 

CPPFLAGS=@CPPFLAGS@ $(JAVAINCLUDES)
CFLAGS=@CFLAGS@
LDFLAGS=@LDFLAGS@

modulePROTOCOLS = $(foreach module,$(MODULES),$($(module)PROTOCOLS))

libjavaswarm_la_OBJECTS = $(addsuffix .lo,$(modulePROTOCOLS))

all: libjavaswarm.la

libjavaswarm.la: $(libjavaswarm_la_OBJECTS)
	$(LIBTOOL) --mode=link $(CC) $(CFLAGS) $(LDFLAGS) -o $@ -rpath $(libdir) $(LIBS)

%.lo: %.c
	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) $(CFLAGS) -c $<

