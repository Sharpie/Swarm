CURRENT = 0
REVISION = 0
AGE = 0
include ../Makefile.common
CC=@CC@
RANLIB=@RANLIB@
top_builddir=../..
SHELL=@SHELL@
LIBTOOL=@LIBTOOL@

prefix=@prefix@
exec_prefix=@exec_prefix@
libdir=@libdir@
LIBS=@LIBS@

javaprefix=@javaprefix@
javaincludedir=$(javaprefix)/include
JAVAINCLUDES=-I$(javaincludedir) -I$(javaincludedir)/solaris -I$(javaincludedir)/genunix

CPPFLAGS=@CPPFLAGS@ $(JAVAINCLUDES)
CFLAGS=@CFLAGS@
LDFLAGS=@LDFLAGS@


modulePROTOCOLS = $(foreach module,$(MODULES),$($(module)PROTOCOLS))

libjavaswarm_la_LDFLAGS = -version-info $(CURRENT):$(REVISION):$(AGE)
libjavaswarm_la_OBJECTS = $(addsuffix .lo,$(modulePROTOCOLS))

all: libjavaswarm.la

libjavaswarm.la: $(libjavaswarm_la_OBJECTS)
	$(LIBTOOL) --mode=link $(CC) $(CFLAGS) $(LDFLAGS) -o $@ -rpath $(libdir) $(libjavaswarm_la_LDFLAGS) $(libjavaswarm_la_OBJECTS) $(LIBS)

%.lo: %.c
	$(LIBTOOL) --mode=compile $(CC) $(CPPFLAGS) $(CFLAGS) -c $<

