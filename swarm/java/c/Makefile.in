CURRENT = 0
REVISION = 0
AGE = 0
include ../Makefile.common
OBJC=@OBJC@
RANLIB=@RANLIB@
INSTALL=@INSTALL@
top_builddir=../..
SHELL=@SHELL@
LIBTOOL=@LIBTOOL@

prefix=@prefix@
exec_prefix=@exec_prefix@
libdir=@libdir@
includedir=@includedir@
LIBS=@LIBS@

jdkdir=@jdkdir@
javaincludedir=$(jdkdir)/include
JAVAINCLUDES=-I$(javaincludedir) -I$(javaincludedir)/solaris -I$(javaincludedir)/genunix

CPPFLAGS=@CPPFLAGS@ $(JAVAINCLUDES) -I$(includedir)
# Solaris JNI headers have some pragmas
OBJCFLAGS=@OBJCFLAGS@ @CFLAGS_NOWARN_UNKNOWN_PRAGMAS@
LDFLAGS=@LDFLAGS@

srcdir=@srcdir@
VPATH=$(srcdir)

modulePROTOCOLS = $(foreach module,$(MODULES),$($(module)PROTOCOLS))

libjavaswarm_la_LDFLAGS = -version-info $(CURRENT):$(REVISION):$(AGE)
libjavaswarm_la_OBJECTS = $(addsuffix .lo,$(modulePROTOCOLS)) directory.lo

all: libjavaswarm.la

install: all
	$(LIBTOOL) --mode=install $(INSTALL) libjavaswarm.la $(libdir)

libjavaswarm.la: $(libjavaswarm_la_OBJECTS)
	$(LIBTOOL) --mode=link $(OBJC) $(CFLAGS) $(LDFLAGS) -o $@ -rpath $(libdir) $(libjavaswarm_la_LDFLAGS) $(libjavaswarm_la_OBJECTS) $(LIBS)

%.lo: %.m
	$(LIBTOOL) --mode=compile $(OBJC) $(CPPFLAGS) $(OBJCFLAGS) -c $<

