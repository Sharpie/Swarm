#!/bin/sh

swarm_prefix=@swarm_prefix@
swarm_exec_prefix=@swarm_exec_prefix@
swarm_datadir=@swarm_datadir@
jdkdir=@jdkdir@

@SHLIBPATH_VAR@=`tr ':' '\012' << EOF | sort 2>/dev/null | uniq | tr '\012' ':'
@swarm_libdir@
@xpmlibdir@
@tcllibdir@
@tklibdir@
@bltlibdir@
@ffilibdir@
@pnglibdir@
@zliblibdir@
EOF`$@SHLIBPATH_VAR@


JAVALIBS=@JAVALIBS@
JAVACLASSES=@JAVACLASSES@
JAVAENV=@JAVAENV@
JAVACMD=@JAVACMD@

export @SHLIBPATH_VAR@
@JAVALIBPATH_VAR@=@swarm_libdir@:@JAVALIBS@

JAVA_CLASSES_INSTALLED_AS=@JAVA_CLASSES_INSTALLED_AS@

if test x$JAVA_CLASSES_INSTALLED_AS = xjar; then
  classpath=".:${swarm_datadir}/swarm/swarm.jar:${JAVACLASSES}:$CLASSPATH"
else
  classpath=".:${swarm_datadir}:${JAVACLASSES}:$CLASSPATH"
fi

if test -z "$*"; then
  echo "@JAVALIBPATH_VAR@=\"$@JAVALIBPATH_VAR@\""
  echo "@SHLIBPATH_VAR@=\"$@SHLIBPATH_VAR@\""
  echo "CLASSPATH=\"$classpath\""
  echo "export @JAVALIBPATH_VAR@ @SHLIBPATH_VAR@ CLASSPATH"   
elif test -n "$JAVASWARMGDB"; then
  export @JAVALIBPATH_VAR@ @SHLIBPATH_VAR@
  (echo "shell rm -f /tmp/.gdbinit.$$";
   echo "cd `pwd`"; echo "set args $*" ) > /tmp/.swarmgdbinit.$$
  eval "$JAVAENV CLASSPATH=$classpath $JAVASWARMGDB -command /tmp/.swarmgdbinit.$$ $JAVACMD"
  rm -f /tmp/.swarmgdbinit.$$
else
  export @JAVALIBPATH_VAR@ @SHLIBPATH_VAR@
  eval "$JAVAENV CLASSPATH=$classpath $JAVACMD $*"
fi

