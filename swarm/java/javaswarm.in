#!/bin/sh

swarm_prefix="@swarm_prefix@"
swarm_exec_prefix="@swarm_exec_prefix@"
jdkdir=@jdkdir@

if test @USEDLL@ = yes; then
  @SHLIBPATH_VAR@=@swarm_libdir@/../bin:@tcllibdir@/../bin:$@SHLIBPATH_VAR@
else
  @SHLIBPATH_VAR@=`cat << EOF | sort 2>/dev/null | uniq | tr '\012' ':'
@swarm_libdir@
@xpmlibdir@
@tcllibdir@
@tklibdir@
@bltlibdir@
@ffilibdir@
@pnglibdir@
@zliblibdir@
EOF
`$@SHLIBPATH_VAR@
fi

if test @USEDOSCLASSPATH@ = yes; then
  PS='@PATHSEP@'
  PD='@PATHDELIM@'
  swarmclassdir=`cygpath -w "@swarm_datadir@"`
  @JAVALIBPATH_VAR@="`cygpath -w @swarm_libdir@`@PATHSEP@@JAVALIBS@"
else
  PS=:
  PD=/
  swarmclassdir="@swarm_datadir@"
  @JAVALIBPATH_VAR@="@swarm_libdir@${PS}@JAVALIBS@"
fi

JAVALIBS=@JAVALIBS@
JAVACLASSES='@JAVACLASSES@'
JAVAENV=@JAVAENV@
JAVACMD=@JAVACMD@

export @SHLIBPATH_VAR@ @JAVALIBPATH_VAR@

JAVA_CLASSES_INSTALLED_AS=@JAVA_CLASSES_INSTALLED_AS@

if test x$JAVA_CLASSES_INSTALLED_AS = xjar; then
  classpath=".${PS}${swarmclassdir}${PD}swarm${PD}swarm.jar${PS}${JAVACLASSES}${PS}$CLASSPATH"
else
  classpath=".${PS}${swarmclassdir}${PS}${JAVACLASSES}${PS}$CLASSPATH"
fi

if test -z "$*"; then
  echo "@JAVALIBPATH_VAR@=\"$@JAVALIBPATH_VAR@\""
  echo "@SHLIBPATH_VAR@=\"$@SHLIBPATH_VAR@\""
  echo "CLASSPATH=\"$classpath\""
  echo "export @JAVALIBPATH_VAR@ @SHLIBPATH_VAR@ CLASSPATH"   
elif test -n "$JAVASWARMGDB"; then
  (echo "shell rm -f /tmp/.gdbinit.$$";
   echo "cd `pwd`"; echo "set args $*" ) > /tmp/.swarmgdbinit.$$
  eval "$JAVAENV CLASSPATH='$classpath' $JAVASWARMGDB -command /tmp/.swarmgdbinit.$$ $JAVACMD"
  rm -f /tmp/.swarmgdbinit.$$
else
  eval "$JAVAENV CLASSPATH='$classpath' $JAVACMD $*"
fi

