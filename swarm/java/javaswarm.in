#!/bin/sh

swarm_prefix="@swarm_prefix@"
swarm_exec_prefix="@swarm_exec_prefix@"
if test '@PATHDELIM@' = '/' ; then
  swarmclassdir="@swarm_datadir@"
else
  swarmclassdir=`cygpath -w "@swarm_datadir@"`
fi
jdkdir=@jdkdir@

@SHLIBPATH_VAR@=`cat << EOF | sort 2>/dev/null | uniq | tr '\012' ':'
@swarm_libdir@
@xpmlibdir@
@tcllibdir@
@tklibdir@
@bltlibdir@
@ffilibdir@
@pnglibdir@
@zliblibdir@
EOF`$@SHLIBPATH_VAR@


JAVALIBS=@JAVALIBS@
JAVACLASSES='@JAVACLASSES@'
JAVAENV=@JAVAENV@
JAVACMD=@JAVACMD@

@JAVALIBPATH_VAR@="@swarm_libdir@:@JAVALIBS@"
export @SHLIBPATH_VAR@ @JAVALIBPATH_VAR@

JAVA_CLASSES_INSTALLED_AS=@JAVA_CLASSES_INSTALLED_AS@

if test x$JAVA_CLASSES_INSTALLED_AS = xjar; then
  classpath=".@PATHSEP@${swarmclassdir}@PATHDELIM@swarm@PATHDELIM@swarm.jar@PATHSEP@${JAVACLASSES}@PATHSEP@$CLASSPATH"
else
  classpath=".@PATHSEP@${swarmclassdir}@PATHSEP@${JAVACLASSES}@PATHSEP@$CLASSPATH"
fi

if test -z "$*"; then
  echo "@JAVALIBPATH_VAR@=\"$@JAVALIBPATH_VAR@\""
  echo "@SHLIBPATH_VAR@=\"$@SHLIBPATH_VAR@\""
  echo "CLASSPATH=\"$classpath\""
  echo "export @JAVALIBPATH_VAR@ @SHLIBPATH_VAR@ CLASSPATH"   
elif test -n "$JAVASWARMGDB"; then
  (echo "shell rm -f /tmp/.gdbinit.$$";
   echo "cd `pwd`"; echo "set args $*" ) > /tmp/.swarmgdbinit.$$
  eval "$JAVAENV CLASSPATH='$classpath' $JAVASWARMGDB -command /tmp/.swarmgdbinit.$$ $JAVACMD"
  rm -f /tmp/.swarmgdbinit.$$
else
  eval "$JAVAENV CLASSPATH='$classpath' $JAVACMD $*"
fi

