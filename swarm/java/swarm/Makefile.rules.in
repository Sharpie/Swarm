JAVAC=@JAVAC@
jdkdir=@jdkdir@

CLASSPHASES := __c _u
PHASES := $(CLASSPHASES) _s

INTERFACES := $(subst __c,,$(foreach sfx,$(PHASES),$(addsuffix $(sfx),$(addprefix i_,$(modulePROTOCOLS)))))

CLASSES := $(subst __c,,$(foreach sfx,$(CLASSPHASES),$(addsuffix $(sfx),$(modulePROTOCOLS))))

CLASSFILES = $(addsuffix .class,$(CLASSES)) $(addsuffix .class,$(INTERFACES))

$(CLASSFILES): $(addsuffix .java,$(CLASSES)) $(addsuffix .java,$(INTERFACES))
	$(JAVAC) -classpath ../..:$(jdkdir)/lib/classes.zip $^

all: $(CLASSFILES)
