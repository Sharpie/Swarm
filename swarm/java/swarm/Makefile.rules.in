JAVAC=@JAVAC@
jdkdir=@jdkdir@

%.class: %.java
	$(JAVAC) -classpath ../..:$(jdkdir)/lib/classes.zip $<

CLASSPHASES := __c _u
PHASES := $(CLASSPHASES) _s

INTERFACES := $(subst __c,,$(addsuffix .class,$(foreach sfx,$(PHASES),$(addsuffix $(sfx),$(addprefix i_,$(modulePROTOCOLS))))))

CLASSES := $(subst __c,,$(addsuffix .class,$(foreach sfx,$(CLASSPHASES),$(addsuffix $(sfx),$(modulePROTOCOLS)))))

all: $(CLASSES) $(INTERFACES)
