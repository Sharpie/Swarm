jdkdir=@jdkdir@
jdkbindir=$(jdkdir)/bin
JAVALIBS=@JAVALIBS@
JAVACMD=@JAVACMD@
JAVAENV=@JAVAENV@
JAVA=@JAVA@
JAVACLASSES=@JAVACLASSES@
JAVAC=@JAVAC@
JAVACOMPILE=$(JAVAC) -classpath "../..@PATHSEP@$(JAVACLASSES)"
top_srcdir=@top_srcdir@

CLASSPHASES := __c U
PHASES := $(CLASSPHASES) S

INTERFACES := $(subst __c,,$(foreach sfx,$(PHASES),$(addsuffix $(sfx),$(addprefix i_,$($(module)PROTOCOLS)))))

_CLASSES := $(subst __c,,$(foreach sfx,$(CLASSPHASES),$(addsuffix $(sfx),$($(module)PROTOCOLS))))

JAVAFILES = $(addsuffix .java,$(_CLASSES)) $(addsuffix .java,$(INTERFACES))

-include .deps

all: $(CLASSES)

.deps: $(JAVAFILES)
	$(JAVA) -classpath "$(top_srcdir)/java/jdeps.jar@PATHSEP@$(JAVACLASSES)" smr.JavaDeps.JavaDeps $(JAVAFILES) > .deps

