prefix=@prefix@
jdkdir=@jdkdir@
jdkbindir=$(jdkdir)/bin
JAVALIBS=@JAVALIBS@
JAVACMD=@JAVACMD@
JAVAENV=@JAVAENV@
JAVA=@JAVA@
JAVACLASSES=@JAVACLASSES@
JAVAC=@JAVAC@
JAVACOMPILE=$(JAVAC) -classpath '..@PATHDELIM@..@PATHSEP@$(JAVACLASSES)'
top_dossrcdir=@top_dossrcdir@
ifneq ($(top_dossrcdir),.)
JAVADEPS = $(top_dossrcdir)@PATHDELIM@java@PATHDELIM@JavaDeps.jar
else
JAVADEPS = ..@PATHDELIM@..@PATHDELIM@JavaDeps.jar
endif

# (WebObjects sh.exe has been known to interfere with running its java.exe)
SHELL = /bin/sh

CLASSPHASES := C __u
PHASES := $(CLASSPHASES) S

INTERFACES := $(subst __u,,$(foreach sfx,$(PHASES),$(addsuffix $(sfx),$($(module)_creatable_PROTOCOLS) $($(module)_noncreatable_PROTOCOLS))))

_CLASSES := $(subst __u,,$(foreach sfx,$(CLASSPHASES),$(addsuffix $(sfx)Impl,$($(module)_creatable_PROTOCOLS))))

JAVAFILES = $(addsuffix .java,$(_CLASSES)) $(addsuffix .java,$(INTERFACES))

all: all-classes

-include .deps

all-classes: $(CLASSES)

.deps: $(JAVAFILES)
	$(JAVA) -classpath '$(JAVADEPS)@PATHSEP@$(JAVACLASSES)' smr.JavaDeps.JavaDeps $(JAVAFILES) | tr -d '\015' > .deps

