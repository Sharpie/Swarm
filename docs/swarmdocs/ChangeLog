1998-10-12  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* Makefile.rules ($(DATA)): Depend on all-recursive. 
	(all-recursive): Add a placeholder for when SUBDIRS is empty.

1998-10-11  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* Makefile.am (html dvi rtf fot ps htmldist dvidist rtfdist psdist): 
	Depend on versions.ent.

1998-10-10  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* Makefile.am (versions.ent): Check to see if it's actually
	changed before touching. 

1998-10-09  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* Makefile.rules (_$(NAME).tex $(addprefix $(NAME),.fot .rtf), 
	$(NAME).html, $(NAME).dvi): Don't depend on figs.
	($(DATA)): Depend on $(FIGS), which is figs/swarm.eps (for the 
	timestamp).

	* Makefile.am (html dvi rtf fot ps htmldist dvidist rtfdist
	psdist): Don't depend on all. 

	* configure.in: Add tex/Makefile to AC_OUTPUT.  Don't use
	AC_PATH_PROG for jadetex or dvips since they can't deal with Cygwin
	paths.  Check using alternate cache varibles.

	* Makefile.rules ($(NAME).dvi): Use tex/macros.tex.

	* Makefile.am (EXTRA_DIST): Remove macros.tex.
	(SUBDIRS): Add tex.

	* macros.tex: Moved to tex/.

1998-10-07  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* configure.in: Add m4/Makefile to AC_OUTPUT.
	Use AC_PATH_PROG instead of AC_CHECK_PROG throughout, and
	ac_cv_path_* instead of ac_cv_prog_*.  Substitute SGML_CATALOG_FILES.

	* Makefile.rules: Pass subsitituted SGML_CATALOG_FILES to runs of jade.

	* acprogs.m4: Moved to m4/.

1998-10-06  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* common.dsl: Revert 1998-09-15 change; it's needed in order
	to get revision histories for each module.

	* macros.tex: Disable insertParagraphBreak, PageColumnSep, lt, gt,
	Entity, endDisplayNIC, and insertExternalGraphic, since they
	appear to be fixed with jadetex 2.2.

	* docbook.dcl (TAGLEN, ATTSPLEN): Increase to 1886.

1998-09-15  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* NEWS: Add notes for 1.3 and 1.3.1.

	* print.dsl (reference-titlepage-recto-mode): Wrap title element
	with a display-group with a break-before: 'page.  This is to get
	modules starting on odd pages (along with change below).

	* macros.tex: Redefine \Break@page to call cleardouble page
	(an abuse).

	* common.dsl: Remove reference-titlepage-{recto,verso}-elements.

	* Makefile.am (EXTRADIST): Add macros.tex.

	* configure.in (VERSION): Bump to 1.3.1.

1998-09-14  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* Makefile.rules (CATOPTS): Use `catalog' instead of `CATALOG' for
	DocBook style sheets.  

	* macros.tex (resetHeadersAndFooters): New macro to clear all
	the headers and footers.
	(endSpS): New macro (overrides jadetex) and adds a call to
	resetHeadersAndFooters.
	(PageColumnSep): Define a default of 18pt.

	* Makefile.am (html dvi rtf fot ps htmldist dvidist rtfdist
	psdist): Use $(MAKE) instead of make.

1998-09-11  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* Makefile.common: Export SWARMSRCDIR to run of history.el.

	* configure.in: Escape $SWARMSRCDIR and $(swarm_srcdir) in 
	help text.

1998-08-24  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* history.el (process-changelog): Sort combined list by timestamp.

	* docbook.dcl (TAGLEN, ATTSPLEN): Increase to 1849.

	* Makefile.am: Use first line of VERSION, so as to avoid subminor.

1998-08-18  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* configure.in (VERSION): Bump to 1.3.

	* docbook.dcl (TAGLEN, ATTSPLEN): Increase to 1805.

	* protocol.el (parse-method): nil name after use.
	(print-method-signature): Handle case of argument without keyword
	(just `:').

1998-07-09  Alex Lancaster  <alex@santafe.edu>

	* INSTALL: Add generic configure instructions. 

1998-06-25  Alex Lancaster  <alex@santafe.edu>

	* configure.in: Update version to 1.2.

1998-06-25  Alex Lancaster  <alex@santafe.edu>

	* Makefile.conf:  Remove.

	* configure.in (--with-swarm): Changed $(SWARMHOME) to
	$(SWARMSRCDIR) as the default environment variable for Swarm
	source.

	* protocol.el (sgml-examples): Wrap the text of the PROGRAMLISTING
	with the "<![ CDATA [ ]]>" directive to prevent erroneous
	interpretation by jade of text of example.

	* history.el (process-changelog): Change all references of
	(swarmhome-changelog-list) to (swarmsrcdir-changelog-list).

	* common.el (get-swarmsrcdir): Changed from (get-swarmhome). Accept
	$(SWARMSRCDIR) as new environment variable.
	(get-swarmdocs): Make all references to get-swarmsrcdir, not
	get-swarmhome.
	(pathname-for-module-sym): Likewise.

1998-06-23  Alex Lancaster  <alex@santafe.edu>

	* Makefile.rules (DISTNAME): Append @VERSION@ to $(NAME) for the
	distributed {tar}.gz files.
	(psdist): Put gzipped file in in parent directory, like
	{html,rtf,dvi}dist targets.

1998-06-18  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* common.dsl (extract-module-list): Reverse list.
	(formal-object-title-mode example title): Add title;
	process-children.

1998-06-17  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* protocol.el (sgml-generate-indices): Rename src to refbook.

	* configure.in (AC_OUTPUT): Rename src to refbook, over to 
	overbook and install to installbook.

	* common.el (pathname-for-swarmdocs): Handle rename of
	src->refbook over->overbook and install->installbook.
	(pathname-for-swarmdocs-pages-output,
	pathname-for-swarmdocs-revision-output): Handle rename of
	src->refbook.

	* catalog.in: Replace src/ with refbook/, over/ with overbook/
	and install/ with installbook/ throughout.   Rename .ent files
	similarly.

	* Makefile.rules (GZIP): New variable.
	(.PHONY): Add dist targets.
	(htmldist, dvidist, psdist, rtfdist, figs): New targets.  Remove
	all as a dependency for fot, tex, dvi, ps, rtf, and html rules.

	* Makefile.am (SUBDIRS): Rename src to refbook, install to
	installbook, and over to overbook.
	(.PHONY): Add html, dvi, rtf, fot, ps, htmldist, dvidist, rtfdist,
	psdist, and alldist.  Add dist targets for modules.

	* html.dsl ($img$): Change ../figs to figs.

	* print.dsl ($img$): Change absolute path to figs.
	
	* Makefile.rules (htmldir, html_DATA, dvidir, dvi_DATA, psdir, ps_DATA,
	rtfdir, rtf_DATA): New variables (handle installation).
	(install-data-local): New target.
	(CLEANFILES): Update per new variables.

	* html.dsl (set-html-base, html-file): New files.
	(Support naming of HTML file by ID for sets.)

1998-06-17  Alex Lancaster  <alex@santafe.edu>

	* README: Add text briefly describing the purpose and contents of
	the swarmdocs package, and a list of required packages.


1998-06-16  Marcus G. Daniels  <mgd@lucero.santafe.edu>

	* print.dsl (toc-depth): 1 for book.
	(make-linebreak): Use an empty paragraph instead of a
	paragraph-break -- the RTF backend doesn't seem to support it.
	($img$): Set keep-with-previous?.

	* macros.tex (insertExternalGraphic): Accomodate KeepWithPrevious.

	* Makefile.am:  Add html, dvi, rtf, and ps targets.

	* Makefile.rules: Allow an error code from jadetex.  Don't
	allow error code for any run of jade.

1998-06-16  Alex Lancaster  <alex@santafe.edu>

	* NEWS:  Added `Release Notes for 1.2'.

1998-06-16  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* acprogs.m4: New file.

	* configure.in: Check for dvips, pngtopnm, pnmtops, and cjpeg.
	Iterate over emacs, jade, jadetex, dvips, pngtopnm, pnmtops, and cjpeg
	ensuring there are not missing.  Call md_PROG_GS.

1998-06-15  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* configure.in: Check for emacs, jade, jadetex, and dvips.
	Abort if any are missing.

	* Makefile.rules (JADE): Substitute JADE, JADETEX, and DVIPS.
	Remove revhistory rules (now in Makefile.common).

	* Makefile.am (EXTRA_DIST): New variable.  Enumerate toplevel
	elisp, dsl, included makefiles, global.ent and docbook.dcl.

	* Makefile.common: New file.

1998-06-15  Alex Lancaster  <alex@santafe.edu>

	* catalog.in: Removed PUBLIC identifier for "Installing Preface" -
	no longer used.

1998-06-13  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* print.dsl (example-title, example-entry-text, make-list, 
	make-listitem): New functions.

	* html.dsl (book): Redefine to run the lot generation
	code (that is disabled in DocBook itself).
	(example-title, example-entry-text, $lot-entry$, lot-title,
	make-list, make-listitem): New functions.

	* common.dsl (example-text, title): Remove.
	(example-entry): Pass match-protocol instead of last-node. 
	When match-protocol is set, an example-node must be
	labeled with match-protocol.
	(collect-example-protocols, uniqify, extract-module-list, 
	filter-protocols, lots-for-protocol): New functions.
	(build-lot): Most of previous contents moved into lots-for-protocol.
	Example table now built by iterating over the modules and 
	protocols (instead of tracking changes in the label).

1998-06-12  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* print.dsl ($img$): Strip off <OSFILE>, but leave path.  Insert
	1/2 inch of space after title and scale slightly different X/Y to
	avoid problems with jadetex.
	(copyright, corpauthor, infotitle): New functions.  infotitle
	ensures page breaks before title pages (for TeX).
	(book-titlepage-recto-mode, set-titlepage-recto-mode,
	article-titlepage-recto-mode):  Expand corpauthor and title
	using new functions (these minimize additional vertical space).

	* html.dsl (pubdate): "Published ", not "Publication Date ".
	(copyright): New function.

	* common.dsl (reference-id-p): Remove.
	(type-id-p): Don't check reference-id-p first.
	(id-to-indexitem): Enhance to check for SECT1, REFERENCE, EXAMPLE,
	and APPENDIX.  Emit warning when no match.
	(reference-titlepage-recto-mode): Empty expansion for abstract.
	(releaseinfo): New function.
	(article-titlepage-verso-mode, book-titlepage-verso-mode,
	reference-titlepage-verso-mode, set-titlepage-verso-mode): Expand
	releaseinfo, abstract, and copyright.
	(set-titlepage-separator): Act
	(abstract): Empty general expansion.

	* Makefile.rules (GENERAL): New variable for common SGML and DSSSL
	dependencies.  Use it in tex/fot/rtf and html rules.

1998-06-12  Marcus G. Daniels  <mgd@wijiji.santafe.edu>

	* common.el (pathname-for-swarmdocs,
	pathname-for-swarmdocs-revision-output):  Use case instead of 
	cond.

1998-06-11  Alex Lancaster  <alex@santafe.edu>

	* common.dsl (%generate-article-titlepage%): Set to false - to
	prevent extra titles being generated in both print and html
	backends.

	* common.el (pathname-for-swarmdocs): Created a conditional to
	create the appropriate pathnames for {set,install,over} modules.
	(pathname-for-swarmdocs-revision-output): Create the
	{set,install,over}revhistory.sgml filenames for parsed ChangeLog
	output.

	* history.el (process-changelog): Added (set over install) to the
	list of modules to be excluded from .h header file parsing.

	* catalog.in: Added PUBLIC identifiers for all SGML in over and
	install and set.  Created PUBLIC identifiers for the
	{over,install,set}.ent lists.

	* configure.in (AC_OUTPUT): Fix pathnames in output files
	generated to be consistent with name change of modules
	{over,install}.

	* Makefile.am (SUBDIRS): Changed overview -> over; installing ->
	install.

1998-06-11  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* Makefile.am (SUBDIRS):  Add figs.

	* catalog.in: Find jpeg, and generated EPS files in build directory.

	* configure.in: Extract figs/Makefile.

1998-06-11  Alex Lancaster  <alex@santafe.edu>

	* html.dsl (nav-context): Local override to this function of
	(component-element-list) - remove 'refentry' from the list to
	correctly generates the title of the enclosing reference as the
	navigation subtitle.
	(nav-context?): Also include 'refentry' in the list gi components
	that require a navigation subtitle.
	(stylesheet):  Include missing sgml end-tag.

	* common.dsl (abstract): Made {empty-sosofo. process-children} in
	reference-titlepage-{recto, verso}-mode, respectively to fix
	position after (partintro) text.
	(common-titlepage-verso-elements): Uncommented 'abstract' from
	list - added 'bookbiblio'.

1998-06-10  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* print.dsl ($img$): New function (handle public identifiers,
	display and always center).  Use it in graphic element in
	{article,book,reference,set}-titlepage-{recto,verso}-mode.

	* Makefile.rules: Depend on print stylesheet for .tex, .fot, and
	.rtf output, and HTML stylesheet for .html.  New variable
	COMMON_SGML_FILES for global.ent, figs.ent, and versions.ent.
	Add CLEANFILES (moved from src/Makefile.am).

	* catalog.in: New public identifiers for html.dsl and print.dsl.

	* Makefile.rules:  Change .htm to .html throughout.
	(HTML, PRINT): New variables (replace SWARMBOOK).  Update
	usages of SWARMBOOK#{html,print} with HTML and PRINT.

	* html.dsl, print.dsl: New files (splits former contents of
	swarmbook.dsl).

1998-06-09  Alex Lancaster  <alex@santafe.edu>

	* catalog.in: Removed Emacs local variable `mode' - was being
	confused as an entity name by jade.
	
	* global.ent (corpauthor):  Created new entity.  Set to SDP.

1998-06-09  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* swarmbook.dsl (revhistory): Don't use $lowtitlewithsosofo$.
	Copy its functionality with the exception of indent.

	* common.dsl (char-change-case, string-change-case): Remove.
	(module-for-id, revhistory-title-for-id): Use case-fold-down instead.

	* swarmbook.dsl (PRIMARYIE): In print backend distinguish between
	a method entry and others (don't create sublist for non-method
	entries).

	* Makefile.am (versions.ent): Force recreation.

	* swarmbook.dsl (%generate-reference-toc%): True in HTML, false in
	printed backend.
	(toc-depth): Book has depth of 1 in HTML, 2 in DVI.  Don't define
	$generate-lot-list$, set-titlepage-verso-elements, copyright
	element, abstract element, book-titlepage-verso-elements,
	generate-reference-titlepage, reference-titlepage-recto-elements,
	reference-titlepage-verso-elements, section-autolabel,
	generate-book-lot-list, shade-ver
	(revhistory): Define to make display group in print backend.
	Create a new page and link to it in HTML backend.
	(%html-ext%): Define as .html.
	(chunk-element-list, book-element-list): Add revhistory in
	order to get html-file to work.
	(pubdate): Prefix with "Publication date " in HTML backend.
	Remove Emacs local variable for DSSSL mode.

	* common.dsl (%generate-set-toc%, %funcsynopsis-decoration%,
	%section-autolabel%): Move from swarmbook.dsl.
	((example title)): Override definition in
	formal-object-title-mode to create a simplified label.
	(common-titlepage-recto-elements, common-titlepage-verso-elements):
	New functions.
	({article,book,reference,set}-titlepage-{recto,verso}-elements):
	Set to common-titlepage-{recto,verso}-elements.
	({article,book,reference,set}-titlepage-recto-mode): Set revhistory
	to be empty.
	({article,book,reference,set}-titlepage-recto-mode): Set revhistory
	to expand to revhistory function.
	(revhistory): Expand to be empty.

	* catalog.in: Add local variable to set SGML mode.

	* swarmbook.dsl (bookinfo): Only define revhistory element in
	bookinfo context.
	(chunk-element-list, book-element-list): New functions: add
	revhistory to definition.
	(revhistory): Put default/top-level expansion (not
	reference-titlepage-verso-mode) on a separate page and link to it.

	* common.dsl (id-to-indexitem): Handle REVHISTORY.
	(revhistory-title-for-id): New function.
	($revhistory$): Use size 2.

	* history.el (process-changelog): Add an ID to REVHISTORY.

	* common.dsl (%gentext-usen-by%): Remove "by" in copyright message.

1998-06-08  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* Makefile.am (all-recursive-am): Depend on versions.ent.

	* global.ent: Remove swarm-release-number,
	swarm-doc-release-number, and pubdate.

	* configure.in: Don't extract src.ent, refbook.sgml, or set.sgml.

	* catalog.in: refindex.sgml, refindex.sgml, srcrevhistory.sgml,
	gridexamples.sgml are generated; use relative paths in the
	top_builddir.  Add new identifiers for Globals, Versions, Src, 
	all module .ent files, overview, install, and set metadata.

	* Makefile.am (noinst_DATA): Add version.ent.
	(versions.ent): Generate from VERSION, SWARMHOME VERSION, and date.

	* figures-html.ent, figures-print.ent: Remove.

1998-06-07  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* swarmbook.dsl ($img$): New definition for HTML: handle public
	identifiers and look for figures in ../figures.
	(%graphic-extensions%): Remove both.
	Remove NOPs for graphics. 

	* catalog.in: Add public identifiers for graphics.

1998-06-06  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* configure.in: Don't extract module.ent files.

	* catalog.in: Add public identifiers for all src/module/module.ent
	files.

1998-06-05  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* history.el (process-changelog): Handle src and tech.

	* configure.in: Add src/tech/Makefile.

	* common.el (pathname-for-swarmdocs,
	pathname-for-swarmdocs-revision-output): Handle src.

	* common.dsl: Mirror revhistory elements outside of
	reference-titlepage-verso-mode.

	* Makefile.rules: Use $(swarm_ChangeLog) instead of
	$(SWARMHOME)/%/ChangeLog in revhistory rule.

1998-06-04  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* swarmbook.dsl (revhistory, revision): Remove for both backends.

	* common.dsl (revhistory): Replace definition with simple title
	and children.
	(revision): A common definition.
	(revremark): Don't expand paragraphs, put in sequence with upright
	font posture.

	* Makefile.rules: Don't include dvi, ps, or tex.  Add explicit _$(NAME).tex target. 
	Make $(NAME).dvi dependent on macros.tex.
	* configure.in: Use `stylesheet' as argument to AC_ARG_WITH.
	
1998-06-03  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* catalog.in: New file.

	* history.el (process-changelog): Call fill-paragraph after
	inserting contents of REVREMARK.

	* common.el (insert-text): Strip tabs also.

	* docbook.dcl: New file (increase limits on NAMELEN, TAGLEN,
	and ATTSPLEN).

	* configure.in: Add option to specify DocBook DTD location.
	Substitute docbookdtd_srcdir and docbookstyle_srcdir (was
	stylesheets_srcdir).  Don't extract swarmbook.dsl.

	* protocol.el (sgml-refsect1-object-list,
	sgml-refsect1-global-list): Add /REFSECT1.
	(sgml-generate-index-of-type): Add /INDEX.

	* swarmbook.dsl: Use public identifiers for common and docbook;
	don't autoconf-substitute anything.
	(reference-titlepage-verso-mode): Add replacement (revhistory
	revision) expansion in HTML backend.

	* common.dsl: Move reference-titlepage-verso-elements 
	and revision history things here.

	* Makefile.rules: New variable CATOPTS, the list of catalog
	directives for local DSSSL, DocBook DTD, and DocBook DSSSL.
	Add $(CATOPTS) to all Jade runs. 

	* configure.in: Update help strings to be conventional.  Get
	default for stylesheet from DOCBOOK, defaulting to
	/DocBookStyleSheets.

	* protocol.el (module): Rename slot module to sym.  New slots
	function-list and line.  Remove scratch-doc-list; item-doc-list is
	now used for globals, macros, and typedefs as well.
	(*macro-name-hash-table*): New hash table (used to detect multiple
	macro definitions).
	(*doc-types*): Add :function-doc and :typedef-doc.
	(*funcptr-regexp*): New constant.
	(skip-whitespace-backward): Revert last change.
	(parse-function): Before leaving, search to ending semicolon.
	(test-parse-function): Fix typo.
	(handle-function): Return output of parse-function.
	(parse-global-using-parse-state): Return output of make-global.
	(immediate-global-tag-processed): Don't clear doc-list here as
	parse-global-using-parse-state does it.
	(extract-doc-string): Move definition up above first use in
	parse-global-using-parse-state.
	(set-buf, append-buf): Line is now in parse-state.
	(extract-funcptr-name, extract-funcptr-name, globaldocp,
	parse-define, lookup-module, lookup-protocol, ensure-module,
	skip-backward-to-nonwhite, sgml-module-id, object-type,
	generic-module, generic-summary, generic-description-list,
	generic-protocol, generic-name, generic-macro-list,
	generic-typedef-list, generic-function-list, generic-global-list,
	sgml-id, name<, module-name, collect-objects-of-type, sgml-indexentry,
	sgml-generate-index-of-type): New functions.
	(update-global-state): Replaces update-global-name, checks for new
	type as well (e.g. in function pointers).
	(check-global-doc-post): Use update-global-state, not
	update-global-name.
	(check-global): Rewrite to handle function pointers.
	(check-common-tags): Check for //F:, //T:.  Move global-variable
	checks together.  Add a case for non-parameterized macros
	(:define) Remove whitespace from function-return-type.
	(check-protocol-tags): Remove //F.
	(protocol-tag-change): Don't handle :function-doc here.
	(common-tag-change): Handle :function-doc, :macro-doc,
	:global-doc, and :typedef-doc identically.  Don't handle :global.
	(parse-typedef): Rewrite to handle function pointers.
	(handle-typedef, parse-macro, handle-macro, handle-define,
	handle-global): Use item-doc-list instead of scratch-doc-list.
	(parse-macro): Use skip-backward-to-nonwhite, not
	skip-whitespace-backward.
	(test-parse-function, test-parse-typedef, test-parse-method):
	Remove.
	(parse-function, parse-method, parse-typedef): Take parse-state as
	an argument instead of function-name, item-list, and example-list.
	(handle-global): Strip space from name.
	(handle-protocol-tag): Pass module (determined from protocol), not
	nil.
	(handle-common-tag): Handle :define.
	(process-header-file): Set parse-state-line.  Pass parse-state,
	not line to immediate-global-tag-processed.
	(load-module): Rewrite to create partial module first, so that
	object can be used during component generation.
	(CREATABLE-protocol): Use lookup-module to get defobj module
	object; don't pass 'defobj.
	(add-protocol): Rename module to module-sym.
	(module-sym-from-spec): Was get-module.
	(load-all-modules): Add CREATABLE protocol after others, so that
	defobj module will be sure to exist.  Renames for routines in
	common.el.  Use ensure-module to avoid multiple instances of same
	module (e.g. random).
	(sgml-object-id): type argument is now a symbol, not a string.
	(sgml-protocol-id, sgml-method-signature-id): Modify per previous.
	(sgml-refentry-start): Different id syntax for modules and
	protocols.
	(sgml-refmeta): Set title and module per protocol vs module.
	(sgml-namediv): Use generic-{name,summary} instead of
	protocol-{name,summary}.
	(sgml-refsect1-description): Use generic-description-list.
	(sgml-method-funcsynopsis): Type may be nil (an id).
	(sgml-macro): Rewrite to handle the :no-arguments case.
	(sgml-function): Use sgml-id.  Arguments don't need a name.
	(sgml-typedef): Use sgml-id.
	(sgml-refsect1-object-list): Sort items by name.
	(sgml-refsect1-macro-list, sgml-refsect1-typedef-list,
	sgml-refsect1-function-list): Take object; use generic-* to get
	relevant list.
	(sgml-refsect1-global-list): Take object; use generic-global-list.
	Use sgml-id.  Handle absence of description list.
	(sgml-examples, sgml-method-examples): Use module-name instead of
	symbol-name.
	(generate-refentry): Don't include
	refsect1-{protocol,method,examples} if not protocol.
	(sgml-generate-refentries-for-module, build-protocol-vector): Sort
	per name<.
	(sgml-create-refentries-for-module): Use module-sym, not module.
	(sgml-generate-indices): Generate indicies for functions, globals,
	macros and typedefs.

	* history.el (process-changelog): Rename module to module-sym.

	* common.el (swarm-modules, pathname-for-swarmdocs,
	pathname-for-swarmdocs-pages-output,
	pathname-for-swarmdocs-revision-output): Rename module to
	module-sym.
	(header-filename-for-module-sym, pathname-for-module-sym): Append
	-sym to name.
	(insert-text): Don't allow nil.

	* swarmbook.dsl.in: common.dsl and figures-html.ent are in top_srcdir.
	(PRIMARYIE): Make a list in method case, otherwise assume
	single entry and print with line break.
	(type): Use a preformatted element.
	Don't use Lispy comments, use SGML comments to contain DSSSL
	mode clue to Emacs.

	* common.dsl (immediate-data, reference-id-p, type-id-p,
	title-for-refentry, typedef-title-for-id, function-title-for-id,
	macro-title-for-id, global-title-for-id): New functions.
	(has-phase-p): Remove.
	(PARAMDEF): Don't append semicolon.
	(protocol-title-for-id): Update for modified ID format.  Use
	title-for-refentry to get title.
	(id-to-description): New function.
	(id-to-indexitem): Use new *-title-for-id functions per type-id-p.
	(term): Append a space.

	* Makefile.rules (SWARMBOOK): Define as $(top_builddir)/swarmbook.dsl
	and replace $(top_srcdir)/swarmbook.dsl with SWARMBOOK.

1998-06-02  Alex Lancaster  <alex@santafe.edu>
	
	* swarmbook.dsl.in: Added file.  
	Added @stylesheets_srcdir@ directive in place of hard-coded path.
	Added local variable to set DSSSL mode for emacs.
	
	* swarmbook.dsl:  Renamed to swarmbook.dsl.in.
	
	* configure.in: Add AC_ARG_WITH "stylesheet" variable for
	generating a --with-stylesheet configure flag - defaults to SFI
	location.

1998-06-01  Marcus G. Daniels  <mgd@mogollon.santafe.edu>

	* configure.in: Check for --with-swarm and --with-gridturtle.
	Substitute swarm_srcdir and gridturtle_srcdir in the Makefiles.

1998-05-29  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* common.dsl (term): Disable printing of commas in a variablelist.

	* protocol.el (protocol): Add function-list slot.
	(global, macro, typedef, function): Add module and protocol slots.
	(parse-state): Add global-names, function-return-type, and
	function-name slots.
	(skip-whitespace-backward): Make sure ending position is on a
	non-space.
	(parse-method): Take protocol instead of protocol-name for first
	argument.
	(parse-function, parse-macro): Add module and protocol as
	arguments, and use them in creation of object.  Use
	skip-whitespace-backward without checking afterward for space,
	adjust buffer-substring to end one character after location.
	(test-parse-function): Modify for new arguments to parse-function.
	(handle-function): Add module, protocol, (parser-state)
	return-type and name arguments, and them through to
	parse-function.
	(parse-global-using-parse-state, immediate-global-tag-processed):
	Add module and protocol arguments.
	(check-global): Also search for comma.  Handle that case by
	storing everything up to ; in global-names.  Nil global-name.
	(check-common-tags): Recognize "extern" before a function
	declaration.  Store parts in function-return-type and
	function-name.  Make regexp for globals reject lines with
	parenthesis.
	(handle-method): Pass protocol instead of protocol-name.
	(parse-typedef): Add module and protocol arguments, and pass
	through to make-typedef.
	(test-parse-typedef): Modify usage per previous.
	(handle-typedef): Add module and protocol arguments.
	(handle-macro, handle-global, handle-protocol-tag,
	handle-common-tag): Add module and protocol arguments.  Adjust
	callers.
	(process-header-files): Pass module.  Replace protocol-flag with
	protocol object.  Adjust callers.
	(load-protocol): Create minimally-initialized object as for use
	during component initialization.
	(sgml-object-id): New function.
	(sgml-method-signature-id, sgml-protocol-id,
	sgml-method-description, sgml-funcsynopsisinfo): Modify to use
	previous.
	(sgml-macro, sgml-function, sgml-typedef): New functions.
	(sgml-refsect1-object-list): Modify to use object output routines
	(like previous).
	(sgml-refsect1-macro-list): Modify usage per previous.
	(sgml-refsect1-typedef-list, sgml-refsect1-function-list): New
	functions.
	(sgml-refsect1-global-list): Modified to creates a VARIABLELIST.
	(generate-refentry-for-protocol): Call sgml-refsect1-typedef-list
	and sgml-refsect1-function-list.

	* swarmbook.dsl (funcprototype): New function for both backends.

	* common.dsl (expand-method): Use $bold-seq$ for signature text.
	(FUNCDEF): Only do type-expand if CLASSNAME is a protocol.
	(get-classname, paramdef, methodprototype): New functions.
	(PARAMDEF): Only do type-expand if CLASSNAME is a protocol,
	otherwise call paramdef.
	(FUNCPROTOTYPE): Call methodprototype if CLASSNAME is a protocol,
	otherwise call funcprototype.
	(has-phase-p, method-signature-id-to-description): Look one more
	into the list; the ID structure is updated to contain a type
	field.
	
	* Makefile.rules: Add common.dsl and swarmbook.dsl as dependencies
	to output files.

	* protocol.el (named-object): Remove.
	(macro, typedef, function, global): New structs.
	(parse-state): New slots: global-type, global-name, function-list,
	item-doc-list, macro-name,
	(method-doc-list, typedef-sig): Remove.
	(parse-function, test-parse-function, handle-function,
	parse-global-using-parse-state, handle-method, parse-typedef,
	test-parse-typedef, handle-typedef, parse-macro, handle-macro,
	handle-global): New functions.
	(make-global): Remove.
	(immediate-global-tag-processed): Use parse-global-using-parse-state.
	(update-global-name): Renamed from update-extern.
	(check-global-doc, check-global-doc-post): Renamed from handle-*.
	(check-common-tags): Deal with #define() and #define
	independently.
	(check-protocol-tags): Note //F:.
	(handle-protocol-tag, handle-common-tag): New new handle-*
	functions.
	(sgml-refsect1-object-list): Renamed from
	sgml-refsect1-named-object-list.  Take name and description list
	accessor parameters.  Change callers.

1998-05-28  Alex Lancaster  <alex@santafe.edu>

	* swarmbook.dsl (html): overwrite (revision
	{revnumber,date,authorinitials,revremark}) in
	(reference-titlepage-verso-mode) to make revision history more
	readable.


1998-05-28  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* protocol.el (parse-state): Remove global-doc-list, macro-doc-list,
	and typedef-doc-list.  Add scratch-doc-list.
	(make-global, immediate-tag-processed, handle-common-tag-change,
	handle-common-tag): Use scratch-doc-list.

1998-05-27  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* protocol.el (parse-state, module): New structures.
	(protocol): Add typedef-list.
	(skip-whitespace-backward, make-global, immediate-tag-prossed,
	is-doc-type, set-buf, append-buf, handle-global-doc-post,
	handle-global, skip-c-comment, check-common-tags,
	check-protocol-tags, handle-protocol-tag-change,
	handle-common-tag-change, handle-protocol-tag, handle-common-tag,
	same-tag-p, end-tag-p, process-header-file, load-module): New
	functions.
	(*protocol-regexp*): New variable.
	(find-protocol): Use *protocol-regexp*.
	(update-extern): Take parse-state as an argument.
	(load-protocol): Use process-header-file (most of contents moved
	to this new functions).
	(load-protocols): Reset to beginning of buffer.
	(load-all-modules): Renamed from load-protocols-for-all-modules.
	Call load-module.
	(load-and-process-modules): Renamed from
	load-and-process-protocols.  Call load-all-modules.

	* Makefile.rules: Use addprefix, not addsuffixes for output
	format rules.

1998-05-27  Alex Lancaster  <alex@santafe.edu>

	* swarmbook.dsl (html): for REFERENCEs, made REVHISTORY be a
	'verso' element and make PARTINTRO appear on 'recto' page - puts
	revhistory after partintro 

	* swarmbook.dsl (print): as per html, effect is to put ABSTRACT
	and REVHISTORY on separate page after PARTINTRO

1998-05-26  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* history.el (process-changelog): Use insert-text instead of insert
	for REVREMARK data.

	* common.el (insert-text): Moved from protocol.el.

	* protocol.el (named-object): New structure.
	(*doc-types*): New types :global-doc, :global-begin, :global-end,
	:global-break.
	(sgml-refsect1-named-object-list, sgml-refsect1-text-list): New
	functions.
	(sgml-refsect1-macro-list, sgml-refsect1-global-list): New
	functions
	(use sgml-refsect1-named-object-list).
	(sgml-refsect1-description-list): Use sgml-refsect1-text-list.
	(load-protocol): Parse //# (traditional) and //G (traditional and
	same-line).
	(insert-text): Reset to start of accessible region, not start
	of line.

	* Makefile.rules: Add $(top_srcdir)/history.el and
	$(top_srcdir)/common.el as a dependents of %revhistory.sgml.  Set
	SWARMDOCS environment variable to the fully-resolved top_srcdir.

	* history.el (process-changelog): Always print REVNUMBER pair,
	even when empty.  

	* history.el, protocol.el: Load common.el from directory
	specified by SWARMDOCS directory.

	* common.el (get-swarmdocs): Try to get it from SWARMDOCS environment
	variable, otherwise default to SWARMHOME/../swarmdocs.

1998-05-24  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* history.el (process-changelog): print closing REVISION tag.

1998-05-23  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* Makefile.rules: Make phony fot, tex, dvi, ps, rtf, and html
	depend on all.

	* protocol.el (sgml-generate-indices): Use get-swarmdocs-build-rea
	instead of get-swarmdocs.

	* history.el: Require gnus for time encoding function.
	Load common.el from swarmdocs path derived from SWARMHOME.
	(process-changelog): Rename from parse-changelogs.
	Modify to only process a module at a time, defaulting to
	command line argument of batch Emacs run.

	* common.el (get-swarmdocs-build-area): New function.
	(pathname-for-swarmdocs-revision-output,
	pathname-for-swarmdocs-pages-output): Use get-swarmdocs-build-area
	isntead of get-swarmdocs.

	* Makefile.am, acconfig.h, configure.in, Makefile.rules: New files.

	* install-sh, missing, mkinstalldirs: New files.

	* AUTHORS, COPYING, INSTALL, NEWS, README: New files.

	* macros.tex: New file.

1998-05-22  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* common.el, history.el: New files.

	* protocol.el: Move get-swarmhome, get-swarmdocs,
	pathname-for-module, and *swarm-modules* to common.el.  Load it.
	(sgml-create-refentries-for-module): 
	Use pathname-for-swarmdocs-pages-output.

	* Begin revision log.

