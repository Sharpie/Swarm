1998-06-02  Alex Lancaster  <alex@santafe.edu>
	
	* swarmbook.dsl.in: Added file.  
	Added @stylesheets_srcdir@ directive in place of hard-coded path.
	Added local variable to set DSSSL mode for emacs.
	
	* swarmbook.dsl:  Renamed to swarmbook.dsl.in.
	
	* configure.in: Add AC_ARG_WITH "stylesheet" variable for
	generating a --with-stylesheet configure flag - defaults to SFI
	location.

1998-06-01  Marcus G. Daniels  <mgd@mogollon.santafe.edu>

	* configure.in: Check for --with-swarm and --with-gridturtle.
	Substitute swarm_srcdir and gridturtle_srcdir in the Makefiles.

1998-05-29  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* common.dsl (term): Disable printing of commas in a variablelist.

	* protocol.el (protocol): Add function-list slot.
	(global, macro, typedef, function): Add module and protocol slots.
	(parse-state): Add global-names, function-return-type, and
	function-name slots.
	(skip-whitespace-backward): Make sure ending position is on a
	non-space.
	(parse-method): Take protocol instead of protocol-name for first
	argument.
	(parse-function, parse-macro): Add module and protocol as
	arguments, and use them in creation of object.  Use
	skip-whitespace-backward without checking afterward for space,
	adjust buffer-substring to end one character after location.
	(test-parse-function): Modify for new arguments to parse-function.
	(handle-function): Add module, protocol, (parser-state)
	return-type and name arguments, and them through to
	parse-function.
	(parse-global-using-parse-state, immediate-global-tag-processed):
	Add module and protocol arguments.
	(check-global): Also search for comma.  Handle that case by
	storing everything up to ; in global-names.  Nil global-name.
	(check-common-tags): Recognize "extern" before a function
	declaration.  Store parts in function-return-type and
	function-name.  Make regexp for globals reject lines with
	parenthesis.
	(handle-method): Pass protocol instead of protocol-name.
	(parse-typedef): Add module and protocol arguments, and pass
	through to make-typedef.
	(test-parse-typedef): Modify usage per previous.
	(handle-typedef): Add module and protocol arguments.
	(handle-macro, handle-global, handle-protocol-tag,
	handle-common-tag): Add module and protocol arguments.  Adjust
	callers.
	(process-header-files): Pass module.  Replace protocol-flag with
	protocol object.  Adjust callers.
	(load-protocol): Create minimally-initialized object as for use
	during component initialization.
	(sgml-object-id): New function.
	(sgml-method-signature-id, sgml-protocol-id,
	sgml-method-description, sgml-funcsynopsisinfo): Modify to use
	previous.
	(sgml-macro, sgml-function, sgml-typedef): New functions.
	(sgml-refsect1-object-list): Modify to use object output routines
	(like previous).
	(sgml-refsect1-macro-list): Modify usage per previous.
	(sgml-refsect1-typedef-list, sgml-refsect1-function-list): New
	functions.
	(sgml-refsect1-global-list): Modified to creates a VARIABLELIST.
	(generate-refentry-for-protocol): Call sgml-refsect1-typedef-list
	and sgml-refsect1-function-list.

	* swarmbook.dsl (funcprototype): New function for both backends.

	* common.dsl (expand-method): Use $bold-seq$ for signature text.
	(FUNCDEF): Only do type-expand if CLASSNAME is a protocol.
	(get-classname, paramdef, methodprototype): New functions.
	(PARAMDEF): Only do type-expand if CLASSNAME is a protocol,
	otherwise call paramdef.
	(FUNCPROTOTYPE): Call methodprototype if CLASSNAME is a protocol,
	otherwise call funcprototype.
	(has-phase-p, method-signature-id-to-description): Look one more
	into the list; the ID structure is updated to contain a type
	field.
	
	* Makefile.rules: Add common.dsl and swarmbook.dsl as dependencies
	to output files.

	* protocol.el (named-object): Remove.
	(macro, typedef, function, global): New structs.
	(parse-state): New slots: global-type, global-name, function-list,
	item-doc-list, macro-name,
	(method-doc-list, typedef-sig): Remove.
	(parse-function, test-parse-function, handle-function,
	parse-global-using-parse-state, handle-method, parse-typedef,
	test-parse-typedef, handle-typedef, parse-macro, handle-macro,
	handle-global): New functions.
	(make-global): Remove.
	(immediate-global-tag-processed): Use parse-global-using-parse-state.
	(update-global-name): Renamed from update-extern.
	(check-global-doc, check-global-doc-post): Renamed from handle-*.
	(check-common-tags): Deal with #define() and #define
	independently.
	(check-protocol-tags): Note //F:.
	(handle-protocol-tag, handle-common-tag): New new handle-*
	functions.
	(sgml-refsect1-object-list): Renamed from
	sgml-refsect1-named-object-list.  Take name and description list
	accessor parameters.  Change callers.

1998-05-28  Alex Lancaster  <alex@santafe.edu>

	* swarmbook.dsl (html): overwrite (revision
	{revnumber,date,authorinitials,revremark}) in
	(reference-titlepage-verso-mode) to make revision history more
	readable.


1998-05-28  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* protocol.el (parse-state): Remove global-doc-list, macro-doc-list,
	and typedef-doc-list.  Add scratch-doc-list.
	(make-global, immediate-tag-processed, handle-common-tag-change,
	handle-common-tag): Use scratch-doc-list.

1998-05-27  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* protocol.el (parse-state, module): New structures.
	(protocol): Add typedef-list.
	(skip-whitespace-backward, make-global, immediate-tag-prossed,
	is-doc-type, set-buf, append-buf, handle-global-doc-post,
	handle-global, skip-c-comment, check-common-tags,
	check-protocol-tags, handle-protocol-tag-change,
	handle-common-tag-change, handle-protocol-tag, handle-common-tag,
	same-tag-p, end-tag-p, process-header-file, load-module): New
	functions.
	(*protocol-regexp*): New variable.
	(find-protocol): Use *protocol-regexp*.
	(update-extern): Take parse-state as an argument.
	(load-protocol): Use process-header-file (most of contents moved
	to this new functions).
	(load-protocols): Reset to beginning of buffer.
	(load-all-modules): Renamed from load-protocols-for-all-modules.
	Call load-module.
	(load-and-process-modules): Renamed from
	load-and-process-protocols.  Call load-all-modules.

	* Makefile.rules: Use addprefix, not addsuffixes for output
	format rules.

1998-05-27  Alex Lancaster  <alex@santafe.edu>

	* swarmbook.dsl (html): for REFERENCEs, made REVHISTORY be a
	'verso' element and make PARTINTRO appear on 'recto' page - puts
	revhistory after partintro 

	* swarmbook.dsl (print): as per html, effect is to put ABSTRACT
	and REVHISTORY on separate page after PARTINTRO

1998-05-26  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* history.el (process-changelog): Use insert-text instead of insert
	for REVREMARK data.

	* common.el (insert-text): Moved from protocol.el.

	* protocol.el (named-object): New structure.
	(*doc-types*): New types :global-doc, :global-begin, :global-end,
	:global-break.
	(sgml-refsect1-named-object-list, sgml-refsect1-text-list): New
	functions.
	(sgml-refsect1-macro-list, sgml-refsect1-global-list): New
	functions
	(use sgml-refsect1-named-object-list).
	(sgml-refsect1-description-list): Use sgml-refsect1-text-list.
	(load-protocol): Parse //# (traditional) and //G (traditional and
	same-line).
	(insert-text): Reset to start of accessible region, not start
	of line.

	* Makefile.rules: Add $(top_srcdir)/history.el and
	$(top_srcdir)/common.el as a dependents of %revhistory.sgml.  Set
	SWARMDOCS environment variable to the fully-resolved top_srcdir.

	* history.el (process-changelog): Always print REVNUMBER pair,
	even when empty.  

	* history.el, protocol.el: Load common.el from directory
	specified by SWARMDOCS directory.

	* common.el (get-swarmdocs): Try to get it from SWARMDOCS environment
	variable, otherwise default to SWARMHOME/../swarmdocs.

1998-05-24  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* history.el (process-changelog): print closing REVISION tag.

1998-05-23  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* Makefile.rules: Make phony fot, tex, dvi, ps, rtf, and html
	depend on all.

	* protocol.el (sgml-generate-indices): Use get-swarmdocs-build-rea
	instead of get-swarmdocs.

	* history.el: Require gnus for time encoding function.
	Load common.el from swarmdocs path derived from SWARMHOME.
	(process-changelog): Rename from parse-changelogs.
	Modify to only process a module at a time, defaulting to
	command line argument of batch Emacs run.

	* common.el (get-swarmdocs-build-area): New function.
	(pathname-for-swarmdocs-revision-output,
	pathname-for-swarmdocs-pages-output): Use get-swarmdocs-build-area
	isntead of get-swarmdocs.

	* Makefile.am, acconfig.h, configure.in, Makefile.rules: New files.

	* install-sh, missing, mkinstalldirs: New files.

	* AUTHORS, COPYING, INSTALL, NEWS, README: New files.

	* macros.tex: New file.

1998-05-22  Marcus G. Daniels  <mgd@ute.santafe.edu>

	* common.el, history.el: New files.

	* protocol.el: Move get-swarmhome, get-swarmdocs,
	pathname-for-module, and *swarm-modules* to common.el.  Load it.
	(sgml-create-refentries-for-module): 
	Use pathname-for-swarmdocs-pages-output.

	* Begin revision log.

